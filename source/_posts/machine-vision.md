---
title: 机器视觉系统设计计算简要流程
date: 2024-09-05 22:34:22
tags: 
- 机器视觉
- 系统设计
categories: 
- 工业实践
cover: https://s3.bmp.ovh/imgs/2024/09/05/df81c4eb6602f0f9.png
---
# 1. 视场的确定
视场由以下因素确定：
- 被测零件最大尺寸
- 被测零件在平移和旋转方向上的位置误差
- 为避免意外情况故意对零件边缘进行偏移
- 为适应相机芯片尺寸比率而扩大的视场
![视场](https://s3.bmp.ovh/imgs/2024/09/05/df81c4eb6602f0f9.png)
如上图所示，1为零件实际尺寸，2为最大的平移和旋转误差，3为综合1、2而设计的最小视场，4为为了增大系统容许量避免一些意外情况而故意扩大的视场，5为考虑到相机芯片的长宽比例而扩大的视场。
所以视场的计算公式为
视场=最大零件尺寸+位置误差+故意扩大部分+为适应相机芯片长宽比例而扩大的部分
# 2. 分辨率计算
$R_c=FOV/R_c$
$R_c=FOV/R_s$

| 名称  | 变量  | 单位 |
| ------------ | ------------ |---------|
| 相机分辨率  | $R_c$  | 像素|
| 空间分辨率  |  $R_s$ | mm/像素 |
| 视场  | FOV  | mm|
| 所检测的最小特征尺寸  | $S_f$  | mm |
| 对应最小特征尺寸的像素数  |  $N_f$ | 像素|

如果视场已知，则相机的分辨率计算如下：
$R_c= \frac {FOV} {R_s}=FOV \cdot \frac{N_f}{S_f}$
# 3. 镜头设计
![镜头模型](https://s3.bmp.ovh/imgs/2024/09/05/6ddbc5d02948a09b.png)
工作距离$a$是焦距$f'>0$和镜头与成像芯片距离 $a'>0$ 的函数。
$\frac{1}{f'}=\frac{1}{a'}-\frac{1}{a'}$
放大率为
$\beta=\frac{y'}{y}=\frac{a'}{a}$
通过视场与成像芯片的尺寸对应关系，放大率为
$\beta=-\frac{Size of CCD}{FOV}$

所以，在已知放大率、工作距离的前提下，镜头焦距的计算为

$f'=a \cdot \frac{\beta}{1-\beta} $

在已知镜头焦距和放大率的前提下，工作距离的计算为

$a=f'\cdot \frac{1-\beta} {\beta}$
焦点到成像平面的距离为
$z'=a'-f'=-f'\cdot \beta$
一般情况下，该距离如果超过5mm则需要加延长管。
# 4. 其它的问题简述
关于相机介绍，光源基础知识等问题，建议参考大恒官网的资料。
[相机光源镜头基础知识](http://www.daheng-imaging.com/news/index.aspx?nodeid=75)